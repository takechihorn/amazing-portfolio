(window.webpackJsonp=window.webpackJsonp||[]).push([[8,2],{373:function(e,t,r){"use strict";r.r(t);var o={props:["error"]},n=r(55),component=Object(n.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"slide",type:"animation"}},[e.error?r("div",{staticClass:"notification is-danger"},[e._v("\n    "+e._s(e.error.message)+"\n  ")]):e._e()])}),[],!1,null,null,null);t.default=component.exports},374:function(e,t,r){"use strict";t.a={methods:{removeErrors:function(){this.$validator.reset(),this.$store.commit("clearError")}},computed:{error:function(){return this.$store.getters.error},busy:function(){return this.$store.getters.busy},jobDone:function(){return this.$store.getters.jobDone}},watch:{jobDone:function(e){e&&(this.$store.commit("setJobDone",!1),this.jobsDone())}}}},389:function(e,t,r){"use strict";r.r(t);r(17),r(35),r(43);var o=r(373),n=r(374),l={components:{ErrorBar:o.default},mixins:[n.a],middleware:"verify-admin",data:function(){return{key:0,name:"",code:"",brand:"",price:"",stock:"",belongs:[],status:1,description:"",image:null,imageName:"",imageUrl:"http://placehold.it/800x600",oldImageUrl:""}},computed:{categories:function(){return this.$store.getters["product/categories"]},productCategories:function(){return this.$store.getters["product/productCategories"]}},watch:{productCategories:function(e){e&&(this.belongs=e)}},mounted:function(){0===this.$store.getters["product/categories"].length&&this.$store.dispatch("product/getCategories");var e=this.$store.getters["product/product"];null!=e&&(this.populateForm(e),this.$store.dispatch("product/productCategories",e.key))},methods:{onSubmit:function(){var e=this;this.$validator.validateAll().then((function(t){if(t){var r={name:e.name,code:e.code,brand:e.brand,price:e.price,stock:e.stock,belongs:e.belongs,status:e.status,description:e.description,image:e.image};e.key?(r.key=e.key,r.imageUrl=e.imageUrl,r.oldImageUrl=e.oldImageUrl,e.$store.dispatch("product/updateProduct",r)):e.$store.dispatch("product/addProduct",r)}}))},onImageSelect:function(e){var t=this,r=e.target.files;this.imageName=r[0].name,this.image=r[0];var o=new FileReader;o.onload=function(){t.imageUrl=o.result},o.readAsDataURL(r[0])},populateForm:function(e){this.key=e.key,this.name=e.name,this.code=e.code,this.brand=e.brand,this.price=e.price,this.stock=e.stock,this.status=e.status,this.description=e.description,this.imageUrl=e.imageUrl,this.oldImageUrl=e.imageUrl},jobsDone:function(){this.$router.push("product-list")},goBack:function(){window.history.go(-1)}}},c=r(55),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("section",{staticClass:"section no-top-pad"},[r("nav",{staticClass:"level"},[e._m(0),e._v(" "),r("div",{staticClass:"level-right"},[r("div",{staticClass:"level-item"},[r("button",{staticClass:"button",on:{click:e.goBack}},[e._v("Back")])])])]),e._v(" "),r("hr"),e._v(" "),r("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[r("div",{staticClass:"columns"},[r("div",{staticClass:"column is-one-third"},[r("label",{staticClass:"label"},[e._v("Product image")]),e._v(" "),r("div",{staticClass:"file has-name is-fullwidth"},[r("label",{staticClass:"file-label"},[r("input",{staticClass:"file-input",attrs:{type:"file",name:"resume"},on:{change:e.onImageSelect}}),e._v(" "),e._m(1),e._v(" "),r("span",{staticClass:"file-name"},[e._v(" "+e._s(e.imageName)+" ")])])]),e._v(" "),r("br"),e._v(" "),r("p",{staticClass:"image is-4by3"},[r("img",{attrs:{src:e.imageUrl}})])]),e._v(" "),r("div",{staticClass:"column"},[r("div",{staticClass:"field"},[r("label",{staticClass:"label"},[e._v("Product Name*")]),e._v(" "),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"},{name:"validate",rawName:"v-validate",value:"required|min:4",expression:"'required|min:4'"}],staticClass:"input",class:{"is-danger":e.errors.has("name")},attrs:{type:"text",name:"name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"help is-danger"},[e._v("\n                "+e._s(e.errors.first("name"))+"\n              ")])])]),e._v(" "),r("div",{staticClass:"field"},[r("label",{staticClass:"label"},[e._v("Code*")]),e._v(" "),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"},{name:"validate",rawName:"v-validate",value:"required|min:2",expression:"'required|min:2'"}],staticClass:"input",class:{"is-danger":e.errors.has("code")},attrs:{type:"text",name:"code"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("code"),expression:"errors.has('code')"}],staticClass:"help is-danger"},[e._v("\n                "+e._s(e.errors.first("code"))+"\n              ")])])]),e._v(" "),r("div",{staticClass:"field"},[r("label",{staticClass:"label"},[e._v("Brand*")]),e._v(" "),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.brand,expression:"brand"},{name:"validate",rawName:"v-validate",value:"required|min:2",expression:"'required|min:2'"}],staticClass:"input",class:{"is-danger":e.errors.has("brand")},attrs:{type:"text",name:"brand"},domProps:{value:e.brand},on:{input:function(t){t.target.composing||(e.brand=t.target.value)}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("brand"),expression:"errors.has('brand')"}],staticClass:"help is-danger"},[e._v("\n                "+e._s(e.errors.first("brand"))+"\n              ")])])]),e._v(" "),r("div",{staticClass:"field"},[r("label",{staticClass:"label"},[e._v("Price*")]),e._v(" "),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"price"},{name:"validate",rawName:"v-validate",value:"required|decimal:2",expression:"'required|decimal:2'"}],staticClass:"input",class:{"is-danger":e.errors.has("price")},attrs:{type:"text",name:"price"},domProps:{value:e.price},on:{input:function(t){t.target.composing||(e.price=t.target.value)}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("price"),expression:"errors.has('price')"}],staticClass:"help is-danger"},[e._v("\n                "+e._s(e.errors.first("price"))+"\n              ")])])]),e._v(" "),r("div",{staticClass:"field"},[r("label",{staticClass:"label"},[e._v("Stock*")]),e._v(" "),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.stock,expression:"stock"},{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],staticClass:"input",class:{"is-danger":e.errors.has("stock")},attrs:{type:"number",name:"stock"},domProps:{value:e.stock},on:{input:function(t){t.target.composing||(e.stock=t.target.value)}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("stock"),expression:"errors.has('stock')"}],staticClass:"help is-danger"},[e._v("\n                "+e._s(e.errors.first("stock"))+"\n              ")])])]),e._v(" "),r("div",{staticClass:"field"},[r("label",{staticClass:"label"},[e._v("Belongs in*")]),e._v(" "),r("div",{staticClass:"control"},[r("div",{staticClass:"select is-multiple"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.belongs,expression:"belongs"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-danger":e.errors.has("belongs")},attrs:{multiple:"",size:"3",name:"belongs"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.belongs=t.target.multiple?r:r[0]}}},e._l(e.categories,(function(t){return r("option",{key:t.key,domProps:{value:t.key}},[e._v("\n                    "+e._s(t.name)+"\n                  ")])})),0)]),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("belongs"),expression:"errors.has('belongs')"}],staticClass:"help is-danger"},[e._v("\n                "+e._s(e.errors.first("belongs"))+"\n              ")])])]),e._v(" "),r("div",{staticClass:"field"},[r("label",{staticClass:"label"},[e._v("Status*")]),e._v(" "),r("div",{staticClass:"control"},[r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.status,expression:"status"}],attrs:{name:"status"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.status=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"1"}},[e._v("Available")]),e._v(" "),r("option",{attrs:{value:"0"}},[e._v("Not Available")])])])])]),e._v(" "),r("div",{staticClass:"field"},[r("label",{staticClass:"label"},[e._v("Detail")]),e._v(" "),r("div",{staticClass:"control"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"textarea",attrs:{name:"description"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}})])]),e._v(" "),r("error-bar",{attrs:{error:e.error}}),e._v(" "),r("div",{staticClass:"field"},[r("div",{staticClass:"control"},[r("button",{staticClass:"button is-primary",class:{"is-loading":e.busy},attrs:{disabled:e.busy}},[e._v("\n                "+e._s(e.key?"Update":"Add")+"\n              ")])])])],1)])])])])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"level-left"},[r("div",{staticClass:"level-item"},[r("h5",{staticClass:"title is-5"},[e._v("Add Product")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"file-cta"},[r("span",{staticClass:"file-icon"},[r("i",{staticClass:"fa fa-upload"})]),e._v(" "),r("span",{staticClass:"file-label"},[e._v(" Upload ")])])}],!1,null,null,null);t.default=component.exports;installComponents(component,{ErrorBar:r(373).default})}}]);