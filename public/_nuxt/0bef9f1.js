(window.webpackJsonp=window.webpackJsonp||[]).push([[7,2],{374:function(t,e,r){"use strict";r.r(e);var n={props:["error"]},o=r(55),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("transition",{attrs:{name:"slide",type:"animation"}},[t.error?r("div",{staticClass:"notification is-danger"},[t._v("\n    "+t._s(t.error.message)+"\n  ")]):t._e()])}),[],!1,null,null,null);e.default=component.exports},375:function(t,e,r){"use strict";e.a={methods:{removeErrors:function(){this.$validator.reset(),this.$store.commit("clearError")}},computed:{error:function(){return this.$store.getters.error},busy:function(){return this.$store.getters.busy},jobDone:function(){return this.$store.getters.jobDone}},watch:{jobDone:function(t){t&&(this.$store.commit("setJobDone",!1),this.jobsDone())}}}},389:function(t,e,r){"use strict";r.r(e);r(17);var n=r(374),o=r(375),c={components:{ErrorBar:n.default},mixins:[o.a],middleware:"verify-admin",data:function(){return{name:"",category:null}},computed:{categories:function(){return this.$store.getters["product/categories"]}},mounted:function(){0===this.$store.getters["product/categories"].length&&this.$store.dispatch("product/getCategories")},methods:{onSubmit:function(){var t=this;this.$validator.validateAll().then((function(e){e&&(t.category?t.$store.dispatch("product/updateCategory",{name:t.name,category:t.category}):t.$store.dispatch("product/createCategory",{name:t.name}))}))},selectCategory:function(t){this.category=t,this.name=t.name},removeCategory:function(t){var e=this;this.$swal({title:"Delete the category?",icon:"warning",buttons:!0,dangerMode:!0}).then((function(r){r&&e.$store.dispatch("product/removeCategory",{category:t})}))},cancelUpdate:function(){this.category=null,this.jobsDone()},jobsDone:function(){var t=this;this.category=null,this.name="",this.$nextTick((function(){t.removeErrors()}))}}},l=r(55),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"section no-top-pad"},[r("h5",{staticClass:"title is-5"},[t._v("Product categories")]),t._v(" "),r("hr"),t._v(" "),r("div",{staticClass:"columns"},[r("div",{staticClass:"column is-one-third"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[r("div",{staticClass:"field"},[t.category?r("label",{staticClass:"label"},[t._v("Update category")]):r("label",{staticClass:"label"},[t._v("New category")]),t._v(" "),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"input",class:{"is-danger":t.errors.has("name")},attrs:{type:"text",name:"name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name"),expression:"errors.has('name')"}],staticClass:"help is-danger"},[t._v("\n                "+t._s(t.errors.first("name"))+"\n              ")])])]),t._v(" "),r("error-bar",{attrs:{error:t.error}}),t._v(" "),r("div",{staticClass:"field"},[r("div",{staticClass:"control"},[r("button",{staticClass:"button is-warning",class:{"is-loading":t.busy},attrs:{disabled:t.busy}},[t._v("\n                "+t._s(t.category?"Update":"Create")+"\n              ")]),t._v(" "),t.category?r("button",{staticClass:"button",staticStyle:{"margin-left":"10px"},attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.cancelUpdate()}}},[t._v("\n                Cancel\n              ")]):t._e()])])],1)]),t._v(" "),r("div",{staticClass:"column"},[r("table",{staticClass:"table is-striped is-fullwidth"},[t._m(0),t._v(" "),r("tbody",t._l(t.categories,(function(e,n){return r("tr",{key:e.key},[r("th",[t._v(t._s(++n))]),t._v(" "),r("td",[r("a",{attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),t.selectCategory(e)}}},[t._v(t._s(e.name))])]),t._v(" "),r("td",[r("a",{attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),t.removeCategory(e)}}},[t._m(1,!0)])])])})),0)])])])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("#")]),t._v(" "),r("th",[t._v("Category")]),t._v(" "),r("th",[t._v("Â ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon has-text-danger"},[e("i",{staticClass:"fa fa-lg fa-times-circle"})])}],!1,null,null,null);e.default=component.exports;installComponents(component,{ErrorBar:r(374).default})}}]);